
<div> 
    <h1> חבילות</h1>  <br><br>
  
  <input [min]="minDate" matInput [matDatepicker]="picker" (click)="picker.open()"  placeholder="מתאריך" #fromDate >
  <mat-datepicker #picker></mat-datepicker>
  
  <input [min]="minDate" matInput [matDatepicker]="picker1" (click)="picker1.open()"  placeholder="עד תאריך" #toDate >
  <mat-datepicker #picker1 ></mat-datepicker>
  
    <input matInput type="text" placeholder="מוצא" ngx-google-places-autocomplete 
     #placesRef="ngx-places" (onAddressChange)="handleAddressFromChange($event)" #fromL >
  
    <input matInput type="text" placeholder="יעד" ngx-google-places-autocomplete  
    #placesRef="ngx-places" (onAddressChange)="handleAddressToChange($event)" #toL>
  
    <input matInput type="time"  placeholder="שעת הגעה" #time >
  
    <select #size >
      <option value="0">הכל </option>
       <option value="1">מכתבים </option>
       <option value="2" >קטן</option>
       <option value="3" >בינוני</option>
       <option value="4" >גדול</option>
     </select>
     <!--חיפוש לפי עיר
    <input id="searchTextField" type="text" size="50" placeholder="Enter a location" autocomplete="on"> -->
  
    <button mat-button (click)="filterPackages(fromDate.value,toDate.value,fromL.value,toL.value,time.value,size.value)">חפש תוצאות</button>
     
      <br>
      <mat-label>מיין לפי:</mat-label>
     <select (change)="sortBy($event.target.value)" >
      <option value="date">תאריך </option>
       <option value="time">שעה </option>
       <option value="from" >מרחק מהמוצא</option>
       <option value="to" >מרחק מהיעד</option>
     </select>
     
  <br>
  <p style="font-size:large;"> נמצאו {{len}} חבילות מתאימות</p>
  <br>
  <table >
    <th>שם</th>
    <th> תאריך </th>
    <th> מוצא </th>
    <th> יעד </th>
    <th> שעת הגעה </th>
    <th> <mat-icon >email</mat-icon> </th>
    <th></th>
    <tr *ngFor="let package of packagesFound;let i=index" >
  <td>{{package.customerName}}</td>
  <td> {{package.travelDate|  date:'dd-MM-yyyy' }} </td>
  <td> {{package.fromLocationFormat}}</td>
  <td> {{package.toLocationFormat}}</td>
  <td> {{package.drivingTime}}</td>
  <td> {{package.packageType}}</td>
  <td> {{package.packageSize}}</td>
  <td> <button mat-button (click)="sendEmail(package)" >שלח מייל</button></td> 
  <td> {{package.packageCode}}</td>
  <!-- <td > <button (click)="hideme[i] = !hideme[i]"><mat-icon>expand_more</mat-icon> </button></td> -->
  </tr>
  
  </table>
  <mat-paginator [length]="packagesFound.length"
              [pageSize]="10">
</mat-paginator>
  </div>
  
