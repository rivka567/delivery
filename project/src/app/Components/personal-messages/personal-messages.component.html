
<div>
 
   <button style="font-size: 20px;margin-top: 15px;" class="btn" (click)="showPackages=true;showDrives=false" >החבילות שלי</button>
    <button style="font-size: 20px;margin-top: 15px;" class="btn" (click)="showPackages=false;showDrives=true" >הנסיעות שלי</button>
  
 
    <h2>ההודעות שלי </h2>
   
 <div *ngIf="showPackages">
  <!-- <div class="row>"><h3>החבילות :</h3></div> -->
  <div class="row table_title" >
    <div class="col-1">קוד חבילה </div>
    <div class="col-1">מתאריך </div>
    <div class="col-1">עד תאריך </div>
    <div class="col-2"> מוצא</div>
    <div class="col-2">יעד </div>
    <div class="col-1">סוג חבילה </div>
    <div class="col-1"> גודל חבילה</div>
    <div class="col-1"> סטטוס </div>
  </div>
  <div  *ngFor="let p of listPackages;let i = index;">
    <div class="row table_list" style="color: blue;" *ngIf="p.listWaiting.length>0">
      <div class="col-1">{{p.packageCode}}</div>
        <div class="col-1">{{p.fromDate|date:'dd-MM-yyyy' }}</div>
          <div class="col-1"> {{p.toDate|date:'dd-MM-yyyy' }}</div>
            <div class="col-2"> {{p.fromLocationFormat}}</div>
              <div class="col-2"> {{p.toLocationFormat}}</div>
                <div class="col-1"> {{p.packageType}}</div>    
                  <div class="col-1"> {{p.packageSize}}</div>
                    <div class="col-1" *ngIf="p.status==false">סגור</div>
                      <div class="col-1" *ngIf="p.status==true">פתוח</div>
 <div class="col-1"> <i class="bi bi-caret-down" (click)="showUndoBtn(i)"></i></div>
 <br>
    </div>

  <div class="row" style="color: red;" *ngFor="let wp of p.listWaiting" attr.id="{{i}}" [hidden]="showBtn!=i">
    <div class="col-1">{{wp.driverName}}</div>  
    <div class="col-1"> <button mat-button *ngIf="p.status==true" (click)="confirmDrive(p,wp,p.listWaiting)"> אשר שליח</button> </div>
    <div class="col-1"><button mat-button  (click)="deleteWaitingMessageFromCustomer(p,wp)">הסר</button> </div>
    <div class="col-1"> <button mat-button (click)="finishPackage(wp.driverCode,p.customerName)">חוות דעת</button> </div>
   <div class="col-1"> <i class="bi bi-three-dots-vertical" (click)="openShowDriveDialog(wp,p)"></i></div>
  </div>

  </div>
</div>





<div *ngIf="showDrives"> 
  <!-- <div><h2>הנסיעות שלי </h2></div> -->

  <div>
    <div class="row table_title" >
        <div class="col-1">קוד נסיעה </div>
        <div class="col-2">תאריך </div>
        <div class="col-2"> מוצא</div>
        <div class="col-2">יעד </div>
        <div class="col-1">שעה </div>
        <div class="col-1">כלי רכב </div>
        <br>
   </div>
        <div  style="color: blue;" *ngFor="let d of listDrives;let i = index;">
            <div class="row table_list" *ngIf="d.listWaiting.length>0">
              <div class="col-1">{{d.driveCode}}</div>
              <div class="col-2"> {{d.travelDate|  date:'dd-MM-yyyy' }}</div>
              <div class="col-2"> {{d.fromLocationFormat}}</div>
              <div class="col-2"> {{d.toLocationFormat}}</div>
              <div class="col-1"> {{d.drivingTime}}</div>
              <div class="col-1"> {{d.transportationType}}</div> 
              <div class="col-1" ><p *ngIf="d.status==false"> נסיעה סגורה</p>
 <button mat-button *ngIf="d.status==true" (click)="changeStatusToClose(d.driveCode)"> סגור נסיעה </button></div>     
  <div class="col-1"> <i class="bi bi-caret-down" (click)="showUndoBtn(i)"></i></div>
  <br>

</div>
            <div class="row" style="color: red;" *ngFor="let wd of d.listWaiting" attr.id="{{i}}" [hidden]="showBtn!=i">
              <div class="col-1">{{wd.customerName}}</div>
              <div class="col-1"> <p *ngIf="wd.status==false">בקשה אושרה</p>
              <p *ngIf="wd.status==true">פתוח</p> </div>  
              <div class="col-1"><button  mat-button (click)="deleteWaitingMessageFromDelivery(d,wd)">הסר</button> </div>
              <div class="col-1"> <i class="bi bi-three-dots-vertical" (click)="openShowPackageDialog(wd,d)"></i></div>
            </div> 
        </div>
  </div>
</div>
